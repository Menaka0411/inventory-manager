<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Invento — Offline Shop Manager</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles/style.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>
</head>

<body>
  <aside class="sidebar">
    <div class="logo">
      <div class="logo-mark">I</div>
      <div>
        <h1>Invento</h1>
        <div class="tag">Track. Bill. Grow. — Offline</div>
      </div>
    </div>

    <nav class="menu">
      <button data-section="dashboard" class="active">Dashboard</button>
      <button data-section="inventory">Inventory</button>
      <button data-section="billing">Billing</button>
      <button data-section="analytics">Analytics</button>
      <button data-section="settings">Settings</button>
    </nav>
  </aside>

  <main class="main">
    <header class="topbar">
      <div class="search-wrap">
        <input id="globalSearch" placeholder="Search products / invoices (works with 1000+ items)..." />
      </div>
      <div class="shop-info">
        <div id="shopNameDisplay">My Shop</div>
      </div>
    </header>

    <!-- ================= DASHBOARD ================= -->
    <section id="dashboard" class="page">
      <div class="cards">
        <div class="card">
          <div class="card-title">Total Revenue</div>
          <div id="totalRevenue" class="card-value">₹0</div>
        </div>
        <div class="card">
          <div class="card-title">Today's Sales</div>
          <div id="todaysSales" class="card-value">₹0</div>
        </div>
        <div class="card">
          <div class="card-title">Low Stock Items</div>
          <div id="lowStockCount" class="card-value">0</div>
        </div>
        <div class="card">
          <div class="card-title">Total Products</div>
          <div id="totalProducts" class="card-value">0</div>
        </div>
      </div>

      <div class="dash-grid">
        <div class="panel">
          <h3>Recent Sales</h3>
          <div id="recentSales" class="list"></div>
        </div>

        <div class="panel">
          <!-- Quick Actions -->
          <h3>Quick Actions</h3>
          <div class="quick-card">
            <div class="quick-actions">
              <button id="goInventory">Manage Inventory</button>
              <button id="goBilling">Open Billing</button>
              <button id="openBulk">Bulk Add</button>
            </div>
          </div>

          <!-- Calendar Card -->
          <div class="calendar-card">
            <div class="calendar-header">
              <button id="prevMonth">&#10094;</button>
              <span id="calendarMonth" class="dropdown-toggle"></span>
              <span id="calendarYear" class="dropdown-toggle"></span>
              <button id="nextMonth">&#10095;</button>
            </div>

            <!-- Dropdowns -->
            <div id="monthDropdown" class="dropdown hidden"></div>
            <div id="yearDropdown" class="dropdown hidden"></div>

            <div class="calendar-weekdays">
              <div>Sun</div>
              <div>Mon</div>
              <div>Tue</div>
              <div>Wed</div>
              <div>Thu</div>
              <div>Fri</div>
              <div>Sat</div>
            </div>

            <div class="calendar-grid" id="calendarGrid"></div>
          </div>

          <!-- Calendar Modal -->
          <div id="calendarModal" class="calendar-modal hidden">
            <div class="calendar-modal-content">
              <h3>Event Details</h3>
              <form id="calendarForm">
                <label for="eventTitle">Title</label>
                <input type="text" id="eventTitle" placeholder="Request new goods / Dues" required>

                <label for="eventDate">Date (DD/MM/YYYY)</label>
                <div class="date-input-wrapper">
                  <input type="text" id="eventDate" readonly>
                  <button type="button" id="editDateBtn" class="edit-date-btn">✎</button>
                </div>

                <label for="eventType">Type</label>
                <select id="eventType">
                  <option value="red">Dues / Deadlines</option>
                  <option value="yellow">Customer Pending Amount</option>
                  <option value="violet">Received New Stock</option>
                  <option value="pink">Loaded New Stock</option>
                </select>

                <label for="eventContent">Content</label>
                <textarea id="eventContent" placeholder="Enter details..." required></textarea>

                <div class="modal-buttons">
                  <button type="submit" id="saveNote">Save</button>
                  <button type="button" class="modal-close" data-target="calendarModal">Cancel</button>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- ================= INVENTORY ================= -->
    <section id="inventory" class="page hidden">
      <div class="section-header">
        <h2>Inventory</h2>
        <div class="section-actions">
          <button id="addItemsBtn">Add Items</button>
          <button id="openBulk2">Bulk Add</button>
        </div>
      </div>

      <div class="sub-row">
        <div id="lowStockBanner" class="low-banner hidden"></div>
      </div>

      <div class="table-wrap">
        <table id="inventoryTable" class="data-table">
          <thead>
            <tr>
              <th>#</th>
              <th>Product</th>
              <th>Category</th>
              <th>MRP</th>
              <th>Unit</th>
              <th>Rate (₹)</th>
              <th>Stock</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
    </section>

    <!-- Add Items Modal -->
    <div id="addItemsModal" class="modal hidden">
      <div class="modal-box">
        <h3>Add Items</h3>
        <table class="modal-table">
          <thead>
            <tr>
              <th>Name</th>
              <th>Category</th>
              <th>MRP</th>
              <th>Unit</th>
              <th>Rate</th>
              <th>Stock</th>
            </tr>
          </thead>
          <tbody id="addItemsBody">
            <tr class="itemRow">
              <td><input></td>
              <td><input></td>
              <td><input type="number"></td>
              <td>
                <select>
                  <option value="pcs">pcs</option>
                  <option value="pack">pack</option>
                  <option value="kg">kg</option>
                  <option value="g">g</option>
                  <option value="L">L</option>
                  <option value="ml">ml</option>
                  <option value="bottle">bottle</option>
                </select>
              </td>
              <td><input type="number"></td>
              <td><input type="number"></td>
            </tr>
          </tbody>
        </table>

        <div class="modal-actions">
          <button id="saveModalItems">Save</button>
          <button class="modal-close" data-target="addItemsModal">Cancel</button>
        </div>
      </div>
    </div>

    <!-- ================= BULK ADD ================= -->
    <section id="bulkPage" class="page hidden">
      <div class="section-header">
        <div class="section-left">
          <button id="backInventory" class="back-btn">← Back</button>
          <h2>Bulk Add</h2>
        </div>
        <div class="section-actions right-controls">
          <button id="addBulkRow">Add Row</button>
          <button id="saveBulkAll">Save All</button>
          <button id="clearBulk">Clear</button>
        </div>
      </div>

      <div class="table-wrap">
        <table id="bulkTable" class="bulk-table">
          <thead>
            <tr>
              <th>Name</th>
              <th>Category</th>
              <th>MRP</th>
              <th>Unit</th>
              <th>Rate</th>
              <th>Stock</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
    </section>

    <!-- ================= BILLING ================= -->
    <section id="billing" class="page hidden">
      <div class="billing-new">
        <div class="pos-body">
          <div class="pos-cart">
            <table id="cartTable" class="pos-table">
              <thead>
                <tr>
                  <th>Item</th>
                  <th>MRP</th>
                  <th>Qty</th>
                  <th>Rate</th>
                  <th>Total</th>
                  <th></th>
                </tr>
              </thead>
              <tbody></tbody>
            </table>
          </div>

          <div class="pos-catalog" id="catalogList"></div>
        </div>

        <div class="pos-summary">
          <div class="totals">
            <div><span>Customer Name: </span><input id="customerName" type="text" placeholder="Enter name"></div>
            <div><span>Customer Mobile: </span><input id="customerMobile" type="text" placeholder="Enter mobile"></div>
            <div><span>Subtotal: </span><span id="subtotal">₹0</span></div>
            <div><span>GST (5%): </span><span id="tax">₹0</span></div>
            <div><span>Discount: </span><input id="discountInput" type="number" min="0" value="0"></div>
            <div class="grand"><span>Grand Total: </span><span id="grandTotal">₹0</span></div>
          </div>

          <div class="pos-buttons">
            <button id="saveSale">Save</button>
            <button id="clearCart">Clear</button>
          </div>
        </div>
      </div>
    </section>

    <!-- ================= ANALYTICS ================= -->
    <section id="analytics" class="page hidden analytics-page">
      <div class="analytics-header">
        <h2>Business Analytics Dashboard</h2>
        <p>Track performance, revenue trends & product insights</p>
      </div>

      <div class="kpi-grid">
        <div class="kpi-card">
          <span class="kpi-label">Total Revenue (This Month)</span>
          <h3 id="kpiMonthRevenue">₹0</h3>
        </div>
        <div class="kpi-card">
          <span class="kpi-label">Total Profit (This Month)</span>
          <h3 id="kpiMonthProfit">₹0</h3>
        </div>
        <div class="kpi-card">
          <span class="kpi-label">Invoices This Month</span>
          <h3 id="kpiInvoiceCount">0</h3>
        </div>
        <div class="kpi-card">
          <span class="kpi-label">Average Order Value</span>
          <h3 id="kpiAverageOrder">₹0</h3>
        </div>
      </div>

      <div class="chart-grid">
        <div class="chart-panel large">
          <h4>Revenue Trend (Last 12 Months)</h4>
          <canvas id="chartRevenueTrend"></canvas>
        </div>

        <div class="chart-panel">
          <h4>Profit vs Expense</h4>
          <canvas id="chartProfitExpense"></canvas>
        </div>
      </div>

      <div class="chart-row">
        <div class="chart-panel">
          <h4>Top Selling Categories</h4>
          <canvas id="chartCategoryPie"></canvas>
        </div>
        <div class="chart-panel">
          <h4>Top 10 Best Selling Products</h4>
          <canvas id="chartTopProducts"></canvas>
        </div>
      </div>

      <div class="chart-panel full">
        <h4>Daily Revenue (Last 30 Days)</h4>
        <canvas id="chartDailyRevenue"></canvas>
      </div>
    </section>

    <!-- ================= SETTINGS ================= -->
    <section id="settings" class="page hidden settings-page">
      <div class="settings-tabs">
        <button class="settings-tab active" data-tab="profileTab">Shop Profile</button>
        <button class="settings-tab" data-tab="historyTab">Invoice History</button>
        <button class="settings-tab" data-tab="expenseTab">Expense</button>
        <button class="settings-tab" data-tab="withdrawTab">Withdraw History</button>
      </div>

      <!-- SHOP PROFILE TAB -->
      <div id="profileTab" class="settings-content active">
        <div class="profile-card">
          <div class="profile-grid">
            <div class="panel">
              <h3>Business Identity</h3>
              <label>Shop Name</label>
              <input id="shopName" placeholder="Ex: Sri Vinayaga Stores">
              <label>Tagline (Optional)</label>
              <input id="shopTag" placeholder="Ex: Quality | Trust | Service">
              <label>Footer Message</label>
              <input id="shopFooter" placeholder="Ex: Thank you! Visit Again">
            </div>

            <div class="panel">
              <h3>Shop Contact Details</h3>
              <label>Address</label>
              <textarea id="shopAddress" placeholder="Street, Area, City, Pincode"></textarea>
              <label>Phone Number</label>
              <input id="shopPhone" placeholder="Ex: +91 98765 43210">
              <label>Email (Optional)</label>
              <input id="shopEmail" placeholder="Ex: shop@gmail.com">
            </div>
          </div>
          <button id="saveShopInfo" class="primary-btn save-btn">Save Changes</button>
        </div>
      </div>

      <!-- INVOICE HISTORY TAB -->
      <div id="historyTab" class="settings-content hidden">
        <div class="panel">
          <h3>Full Invoice History</h3>
          <div class="history-actions">
            <input id="historySearch" placeholder="Search by Customer or Date">
            <button id="printHistory" class="primary-btn">Print</button>
          </div>

          <div class="table-wrap">
            <table id="invoiceHistoryTable" class="data-table">
              <thead>
                <tr>
                  <th style="width:60px;text-align:center;">#</th>
                  <th style="width:90px;">Date</th>
                  <th style="width:90px;">Time</th>
                  <th style="width:100px;">Customer</th>
                  <th style="width:90px;text-align:center;">Mobile</th>
                  <th style="width:100px;text-align:center;">Discount</th>
                  <th style="width:80px;text-align:center;">Items</th>
                  <th style="width:90px;text-align:right;">Total</th>
                </tr>
              </thead>
              <tbody></tbody>
            </table>
          </div>
        </div>
      </div>

      <!-- EXPENSE TAB -->
      <div id="expenseTab" class="settings-content hidden">
        <div class="panel" style="padding:20px;">
          <h3>Expense & Cash Withdrawals</h3>
          <div class="stats-cards" style="display:flex; gap:16px; margin-top:15px;">
            <div class="stat-card">
              <h4>Total Revenue</h4>
              <div id="expTotalRevenue" class="stat-value">₹0</div>
            </div>
            <div class="stat-card">
              <h4>Total Withdrawn</h4>
              <div id="expTotalWithdrawn" class="stat-value">₹0</div>
            </div>
            <div class="stat-card">
              <h4>Withdraw Count</h4>
              <div id="expWithdrawCount" class="stat-value">0</div>
            </div>
            <div class="stat-card">
              <h4>Available Balance</h4>
              <div id="expAvailableBalance" class="stat-value">₹0</div>
            </div>
          </div>

          <button id="withdrawBtn" class="primary-btn" style="margin-top:20px;">Withdraw Money</button>

          <!-- Withdraw Form -->
          <div id="withdrawForm" class="withdraw-form hidden">
            <div class="withdraw-row">
              <label>Amount to Withdraw</label>
              <input type="number" id="withdrawAmount" placeholder="Amount (₹)">
              <label>Purpose</label>
              <input id="withdrawNote" placeholder="Purpose / Notes">
              <button id="confirmWithdraw" class="primary-btn withdraw-action">Proceed</button>
              <button id="cancelWithdraw" class="secondary-btn withdraw-cancel">Cancel</button>
            </div>
          </div>
        </div>
      </div>

      <!-- WITHDRAW HISTORY TAB -->
      <div id="withdrawTab" class="settings-content hidden">
        <div class="panel">
          <h3>Withdraw History</h3>
          <div class="history-actions">
            <input id="withdrawSearch" placeholder="Search by Date or Purpose">
            <button id="printWithdrawHistory" class="primary-btn">Print</button>
          </div>
          <div class="table-wrap">
            <table id="withdrawHistoryTable" class="data-table">
              <thead>
                <tr>
                  <th style="width:60px;text-align:center;">#</th>
                  <th style="width:100px;">Date</th>
                  <th style="width:100px;">Time</th>
                  <th style="width:110px;">Purpose / Notes</th>
                  <th style="width:100px;text-align:right;">Amount</th>
                </tr>
              </thead>
              <tbody></tbody>
            </table>
          </div>
        </div>
      </div>
    </section>
  </main>

  <!-- Scripts -->
  <script src="js/main.js"></script>
  <script src="js/calendar.js"></script>
  <script src="js/inventory.js"></script>
  <script src="js/billing.js"></script>
  <script src="js/analytics.js"></script>
  <script src="js/settings.js"></script>
  
</body>
</html>
